<div class="container-fluid p-4">
  <div class="row mb-4">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          <h3 class="mb-0">Resource Reservation Statistics</h3>
        </div>
        <div class="card-body">
          <form [formGroup]="filterForm" (ngSubmit)="applyFilters()" class="row g-3">
            <!-- Resource Filter -->
            <div class="col-md-3">
              <label for="resourceFilter" class="form-label">Filter by Resource</label>
              <select formControlName="resourceId" id="resourceFilter" class="form-select">
                <option value="">All Resources</option>
                <option *ngFor="let resource of resources" [value]="resource.idResource">
                  {{ resource.name }}
                </option>
              </select>
            </div>

            <!-- User Filter -->
            <div class="col-md-3">
              <label for="userFilter" class="form-label">Filter by User</label>
              <select formControlName="userId" id="userFilter" class="form-select">
                <option value="">All Users</option>
                <option *ngFor="let user of users" [value]="user.userID">
                  {{ user.username }}
                </option>
              </select>
            </div>

            <!-- Start Date Filter -->
            <div class="col-md-3">
              <label for="startDateFilter" class="form-label">From Date</label>
              <input type="date" formControlName="startDate" id="startDateFilter" class="form-control">
            </div>

            <!-- End Date Filter -->
            <div class="col-md-3">
              <label for="endDateFilter" class="form-label">To Date</label>
              <input type="date" formControlName="endDate" id="endDateFilter" class="form-control">
            </div>

            <!-- Filter Buttons -->
            <div class="col-12 mt-3 d-flex justify-content-end">
              <button type="button" class="btn btn-outline-secondary me-2" (click)="resetFilters()">
                <i class="bi bi-arrow-counterclockwise"></i> Reset
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-filter"></i> Apply Filters
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Statistics Summary Cards -->
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="card shadow-sm bg-light h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-primary">Total Reservations</h5>
          <h2 class="display-4 fw-bold">{{ totalReservations }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm bg-light h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-primary">Total Days Reserved</h5>
          <h2 class="display-4 fw-bold">{{ totalReservationDays }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm bg-light h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-primary">Average Reservation Length</h5>
          <h2 class="display-4 fw-bold">{{ averageReservationLength }} <small class="fs-6">days</small></h2>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm bg-light h-100">
        <div class="card-body text-center">
          <h5 class="card-title text-primary">Most Reserved Resource</h5>
          <h4 class="mt-3">{{ mostReservedResource || 'N/A' }}</h4>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts Row 1 -->
  <div class="row mb-4">
    <div class="col-md-8">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <div style="height: 350px;">
            <canvas #resourceUsageChart></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <div style="height: 350px;">
            <canvas #userStatsChart></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts Row 2 -->
  <div class="row">
    <div class="col-md-8">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <div style="height: 350px;">
            <canvas #monthlyStatsChart></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <div class="card-body">
          <div style="height: 350px;">
            <canvas #dayDistributionChart></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
