<div class="container mt-4">
  <div class="card p-3 shadow-sm">
    <h4 class="mb-3">Liste des enregistrements</h4>

    <div *ngIf="mentalHealths.length === 0" class="alert alert-info">
      Aucune donnée trouvée. Commencez par ajouter un nouvel enregistrement.
    </div>

    <div *ngIf="mentalHealths.length > 0" class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="table-light">
        <tr>
          <th >User</th>
          <th>Moment de réponse</th>
          <th>Niveau de stress</th>
          <th>État émotionnel</th>
          <th>Besoin de soutien</th>
          <th>Date soumission</th>

          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let mh of mentalHealths">
          <td>{{ mh.user?.username || 'Utilisateur inconnu' }}</td>
          <td>{{ mh.responseMoment }}</td>
          <td>{{ mh.stressLevel }}</td>
          <td>
            <span class="badge bg-primary">{{ mh.emotionalState }}</span>
          </td>
          <td>
              <span class="badge" [ngClass]="{
                'bg-success': mh.supportNeed === 'Oui',
                'bg-danger': mh.supportNeed === 'Non'
              }">
                {{ mh.supportNeed }}
              </span>
          </td>
          <td>{{ mh.submissionDate | date: 'dd/MM/yyyy' }}</td>

          <td>
            <div class="d-flex gap-2">

              <button *ngIf="mh.idMentalHealth" class="btn btn-sm btn-outline-danger" (click)="deleteMentalHealth(mh.idMentalHealth)">
                <i class="bi bi-trash"></i> Supprimer
              </button>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
