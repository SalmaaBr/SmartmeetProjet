<div class="profile-container">
  <div *ngIf="isLoading" class="loading">Loading user data...</div>
  
  <div *ngIf="error" class="error-alert">
    {{ error }}
  </div>

  <div *ngIf="user && !isLoading" class="user-profile">
    <h2>{{ isCurrentUser ? 'My Profile' : 'User Profile' }}</h2>
    
    <div class="profile-info">
      <!-- Vos champs existants restent les mêmes -->
      <div class="info-row">
        <span class="label">Username:</span>
        <span class="value">{{ user.username }}</span>
      </div>
      
      <div class="info-row">
        <span class="label">Email:</span>
        <span class="value">{{ user.email }}</span>
      </div>
      
      <div class="info-row">
        <span class="label">Phone Number:</span>
        <span class="value">{{ user.phoneNumber || 'Not provided' }}</span>
      </div>
      
      <div class="info-row">
        <span class="label">Address:</span>
        <span class="value">{{ user.address || 'Not provided' }}</span>
      </div>
      
      <div class="info-row">
        <span class="label">Roles:</span>
        <span class="value">{{ getUserRoles() }}</span>
      </div>
    </div>
  </div>

  <div class="action-buttons">
      <a *ngIf="isCurrentUser" [routerLink]="['/front/profile']" class="btn btn-primary">
          Edit Profile
      </a>
    </div>
</div>

<h2 class="section-title mt-5">🎉 Events I'm Participating In</h2>

<div *ngIf="myEvents.length == 0">
<p class="text-muted">You haven't participated in any events yet.</p>
</div>





<div class="event-list">
<div *ngFor="let event of myEvents" class="event-card">
  <div class="event-image-container">
    <img [src]="event.imageUrl || 'assets/default-event.jpg'" alt="Image de l'événement" class="event-image">
  </div>
  <div class="event-details">
    <h3 class="event-title">{{ event.title }}</h3>
    <p>{{ event.description }}</p>
    <span class="event-location">📍 {{ event.location }}</span>
  </div>
  <div class="mini-map mt-3 rounded shadow-sm" #mapContainer style="height: 250px;"></div>
</div>


  <!-- Section des événements recommandés -->

  <h2 class="section-title mt-5"> 🎉 Recomended event</h2>

  
  <div class="recommended-events-section" *ngIf="recommendedEvents.length > 0">
    <h2 class="section-title">Événements recommandés pour vous</h2>
    <div class="events-grid">
      <div class="event-card" *ngFor="let event of recommendedEvents">
        <div class="event-header">
          <h3>{{ event.title }}</h3>
          <span class="event-theme">{{ event.typetheme }}</span>
        </div>
        <div class="event-body">
          <p>{{ event.description }}</p>
          <div class="event-details">
            <div class="detail">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{ event.location }}</span>
            </div>
            <div class="detail">
              <i class="far fa-calendar-alt"></i>
              <span>{{ event.startTime | date:'medium' }}</span>
            </div>
          </div>
        </div>
        <div class="event-footer">
          <button class="btn btn-primary">Voir détails</button>
          <button class="btn btn-outline">Participer</button>
        </div>
      </div>
    </div>
  </div>

</div>
